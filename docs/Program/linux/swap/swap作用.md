<h1 align="center">swap作用</h1>
# 简述Linux中Swap分区的作用,linux下的swap分区



https://blog.csdn.net/weixin_35080040/article/details/116844381



### 1. 什么叫[swap](https://so.csdn.net/so/search?q=swap&spm=1001.2101.3001.7020)分区

swap分区，即交换区，swap空间的作用可简单描述为：当系统的物理[内存](https://so.csdn.net/so/search?q=内存&spm=1001.2101.3001.7020)不够用的时候，就需要将物理内存中的一部分空间释放出来，以供当前运行的程序使用。那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到Swap空间中，等到那些程序要运行时，再从Swap中恢复保存的数据到内存中。



### 2. swap配置对性能的影响

Swap的调整对Linux服务器，特别是Web服务器的性能至关重要。通过调整Swap，有时可以越过系统性能瓶颈，节省系统升级费用。但是分配太多的Swap空间会浪费磁盘空间，而Swap空间太少，则系统会发生错误。

如果系统的物理内存用光了，系统就会跑得很慢，但仍能运行；如果Swap空间用光了，那么系统就会发生错误。例如，Web服务器能根据不同的请求数量衍生出多个服务进程(或线程)如果系统物理内存不够用，网站打开会很慢，ping可能会丢包，延迟很大；如果Swap空间用完，则服务进程无法启动，通常会出现“application is out of memory”的错误，严重时会造成服务进程的死锁。因此Swap空间的分配是很重要的。

### 3. swap分区的划分规则

在linux中，我们对swap分区的划分有一定的规则，当物理内存小于2G时，swap分区大小为物理内存的2倍；超过2G的部分，swap分区大小跟物理内存相等。

```python
当ram < 2G 时，swap=2ram；

当2G < ram < 32G时，swap= 1.5ram

当ram >= 32G 时，swap<=ram；
```



例：当物理内存为4G的时候，swap为6G；当物理内存大于32G的时候，swap分区小于等于物理内存比较好。

附:规则不是一成不变的，所谓swap分区的划分没必要太过于死板，这里所说的规则仅供参考。



### 4. 内存的查看

下面几种方式都能看内存的大小 

```shell
# -m 是以M为单位
free -m
swapon -s 
htop
top
```

